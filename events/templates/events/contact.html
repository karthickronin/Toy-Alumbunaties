{% extends 'events/base.html' %}
{% load static %}

{% block title %}Contact Us - Toy Alumbunaties{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="page-header">
    <div class="hero-overlay"></div>
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col-lg-8">
                <h1 class="page-title" data-aos="fade-up">
                    Contact <span class="text-script">Us</span> üìû
                </h1>
                <p class="page-subtitle" data-aos="fade-up" data-aos-delay="200">
                    Let's bring joy and smiles to your child's special event!
                </p>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section class="contact-section py-5">
    <div class="container">
        <!-- Contact Info Cards -->
        <div class="row mb-5">
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="100">
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h5>Call Deepak üìû</h5>
                    <p>Phone: 9360895326<br>BBA (Shipping & Logistics)<br>Available for GPay payments</p>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="200">
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h5>Call Jeeva üìû</h5>
                    <p>Phone: 9342569205<br>BBA (Shipping & Logistics)<br>Performance Coordinator</p>
                </div>
            </div>
            
            <div class="col-lg-4 col-md-6 mb-4" data-aos="fade-up" data-aos-delay="300">
                <div class="contact-info-card">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h5>Call Jeeva üìû</h5>
                    <p>Phone: 8122626281<br>BA (Economics)<br>Creative Director</p>
                </div>
            </div>
        </div>
        
        <div class="row">
            <!-- Contact Form -->
            <div class="col-lg-8 mb-4" data-aos="fade-right">
                <div class="contact-form">
                    <h3 class="mb-4">Send Us a Message</h3>
                    
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                    
                    <form method="post" id="djangoContactForm">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="name" class="form-label">Full Name *</label>
                                    <input type="text" class="form-control" id="name" name="name" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="email" class="form-label">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="phone" class="form-label">Phone Number *</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="event_date" class="form-label">Event Date *</label>
                                    <input type="date" class="form-control" id="event_date" name="event_date" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="event_type" class="form-label">Event Type *</label>
                            <select class="form-select" id="event_type" name="event_type" required>
                                <option value="">Select Event Type</option>
                                {% for event_type in event_types %}
                                    <option value="{{ event_type.id }}">{{ event_type.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="message" class="form-label">Tell us about your event *</label>
                            <textarea class="form-control" id="message" name="message" rows="5" placeholder="Tell us about your child's age, favorite characters, party theme, number of kids expected, and any special requests..." required></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-paper-plane me-2"></i>Send Message
                        </button>
                        
                        <button type="button" class="btn btn-outline-primary btn-lg ms-2" onclick="sendViaWeb3Forms(event)">
                            <i class="fas fa-cloud me-2"></i>Send via Web3Forms
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Additional Info -->
            <div class="col-lg-4" data-aos="fade-left">
                <div class="contact-sidebar">
                    <div class="sidebar-widget mb-4">
                        <h4 class="widget-title">Available Hours üïê</h4>
                        <div class="office-hours">
                            <div class="hour-item">
                                <span class="day">Monday - Friday</span>
                                <span class="time">10:00 AM - 7:00 PM</span>
                            </div>
                            <div class="hour-item">
                                <span class="day">Saturday - Sunday</span>
                                <span class="time">9:00 AM - 8:00 PM</span>
                            </div>
                            <div class="hour-item">
                                <span class="day">Events</span>
                                <span class="time">Flexible Timing</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="sidebar-widget mb-4">
                        <h4 class="widget-title">Follow Our Fun üì±</h4>
                        <div class="social-links">
                            <a href="#" class="social-link">
                                <i class="fab fa-facebook-f"></i>
                                <span>Facebook</span>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-instagram"></i>
                                <span>Instagram</span>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-youtube"></i>
                                <span>YouTube</span>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-tiktok"></i>
                                <span>TikTok</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="sidebar-widget">
                        <h4 class="widget-title">Quick Booking üéâ</h4>
                        <p class="text-light">Need to book urgently? Call us directly or send a WhatsApp message for immediate response!</p>
                        <div class="quick-contact">
                            <a href="tel:+919360895326" class="btn btn-outline-primary btn-sm me-2 mb-2">
                                <i class="fas fa-phone me-1"></i>Call Deepak
                            </a>
                            <a href="https://wa.me/919360895326" class="btn btn-outline-primary btn-sm mb-2">
                                <i class="fab fa-whatsapp me-1"></i>WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Map Section -->
<section class="map-section py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-4">
                <h2 class="section-title" data-aos="fade-up">
                    We Come to <span class="text-script">You</span> üöó
                </h2>
                <p class="section-description" data-aos="fade-up" data-aos-delay="200">
                    We bring all the fun directly to your venue - home, park, community center, or anywhere you want to celebrate!
                </p>
            </div>
        </div>
        
        <div class="row">
            <div class="col-12" data-aos="fade-up" data-aos-delay="300">
                <div class="map-container">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3024.1234567890123!2d-74.0059413!3d40.7127753!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDDCsDQyJzQ2LjAiTiA3NMKwMDAnMjEuNCJX!5e0!3m2!1sen!2sus!4v1234567890123!5m2!1sen!2sus"
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- FAQ Section -->
<section class="faq-section py-5">
    <div class="container">
        <div class="row">
            <div class="col-12 text-center mb-5">
                <h2 class="section-title" data-aos="fade-up">
                    Frequently Asked <span class="text-script">Questions</span>
                </h2>
            </div>
        </div>
        
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="accordion" id="contactFaqAccordion">
                    <div class="accordion-item" data-aos="fade-up" data-aos-delay="100">
                        <h2 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#contactFaq1">
                                How quickly do you respond to bookings?
                            </button>
                        </h2>
                        <div id="contactFaq1" class="accordion-collapse collapse show" data-bs-parent="#contactFaqAccordion">
                            <div class="accordion-body">
                                We typically respond to all inquiries within 2-4 hours! For urgent bookings, call us directly at 9360895326 (Deepak) or 9342569205 (Jeeva) for immediate response.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item" data-aos="fade-up" data-aos-delay="200">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#contactFaq2">
                                Do you provide free consultations?
                            </button>
                        </h2>
                        <div id="contactFaq2" class="accordion-collapse collapse" data-bs-parent="#contactFaqAccordion">
                            <div class="accordion-body">
                                Yes! We offer free consultations to discuss your event details, understand your child's preferences, and customize our entertainment to make their day extra special.
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion-item" data-aos="fade-up" data-aos-delay="300">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#contactFaq3">
                                Can you perform on weekends and holidays?
                            </button>
                        </h2>
                        <div id="contactFaq3" class="accordion-collapse collapse" data-bs-parent="#contactFaqAccordion">
                            <div class="accordion-body">
                                Absolutely! We love performing on weekends and holidays when kids are free to enjoy. We're available 7 days a week with flexible timing to suit your event schedule.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Web3Forms integration for Django contact form
function sendViaWeb3Forms(event) {
    const form = document.getElementById('djangoContactForm');
    const formData = new FormData();
    
    // Add Web3Forms required fields
    formData.append('access_key', '305ed920-1632-4406-896b-dff5ecebe2ef');
    formData.append('subject', 'New Contact from Toy Alumbunaties Django Site');
    formData.append('from_name', 'Toy Alumbunaties Django Contact Form');
    
    // Add form fields
    formData.append('name', document.getElementById('name').value);
    formData.append('email', document.getElementById('email').value);
    formData.append('phone', document.getElementById('phone').value);
    formData.append('event_date', document.getElementById('event_date').value);
    formData.append('event_type', document.getElementById('event_type').options[document.getElementById('event_type').selectedIndex].text);
    formData.append('message', document.getElementById('message').value);
    
    const submitButton = event.target;
    const originalText = submitButton.innerHTML;
    
    // Show loading state
    submitButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Sending...';
    submitButton.disabled = true;
    
    fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert('üéâ Thank you! Your message has been sent successfully via Web3Forms. We will contact you soon!');
            form.reset();
        } else {
            throw new Error('Web3Forms submission failed');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('‚ùå Sorry, there was an error sending your message via Web3Forms. Please try the regular form or call us directly.');
    })
    .finally(() => {
        // Reset button state
        submitButton.innerHTML = originalText;
        submitButton.disabled = false;
    });
}
</script>
{% endblock %}